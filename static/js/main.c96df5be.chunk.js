(this.webpackJsonpchess=this.webpackJsonpchess||[]).push([[0],{26:function(e,t,n){var a=n(58),r=["init","newGame","calculateMove","performMove","setPosition"];e.exports=function(){var e=new Worker(n.p+"bf0b969220ef808c557f.worker.js",{name:"[hash].worker.js"});return a(e,r),e}},33:function(e,t,n){e.exports=n.p+"static/media/white_pawn.41da1b5b.svg"},34:function(e,t,n){e.exports=n.p+"static/media/black_pawn.3cab4671.svg"},35:function(e,t,n){e.exports=n.p+"static/media/white_knight.3ece5029.svg"},36:function(e,t,n){e.exports=n.p+"static/media/black_knight.88ad52be.svg"},37:function(e,t,n){e.exports=n.p+"static/media/white_bishop.36a96cf8.svg"},38:function(e,t,n){e.exports=n.p+"static/media/black_bishop.341337f4.svg"},39:function(e,t,n){e.exports=n.p+"static/media/white_rook.007b43f5.svg"},40:function(e,t,n){e.exports=n.p+"static/media/black_rook.e7f61dec.svg"},41:function(e,t,n){e.exports=n.p+"static/media/white_queen.51d538db.svg"},42:function(e,t,n){e.exports=n.p+"static/media/black_queen.87612c77.svg"},43:function(e,t,n){e.exports=n.p+"static/media/white_king.9e716b1e.svg"},44:function(e,t,n){e.exports=n.p+"static/media/black_king.12ae1430.svg"},51:function(e,t,n){e.exports=n(66)},56:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(25),o=n.n(i),c=(n(56),n(3)),l=n.n(c),s=n(47),d=n(5),u=n(4),m=n(26),p=n.n(m),f=u.a.div.withConfig({displayName:"AnimatedSpinner",componentId:"sc-1x64dsd-0"})(['color:#073642;display:inline-block;position:relative;width:80px;height:80px;margin-top:1rem;margin-right:0.5rem;margin-left:1.5rem;div{transform-origin:40px 40px;animation:lds-spinner 1.2s linear infinite;}div:after{content:" ";display:block;position:absolute;top:3px;left:37px;width:6px;height:18px;border-radius:20%;background:#073642;}div:nth-child(1){transform:rotate(0deg);animation-delay:-1.1s;}div:nth-child(2){transform:rotate(30deg);animation-delay:-1s;}div:nth-child(3){transform:rotate(60deg);animation-delay:-0.9s;}div:nth-child(4){transform:rotate(90deg);animation-delay:-0.8s;}div:nth-child(5){transform:rotate(120deg);animation-delay:-0.7s;}div:nth-child(6){transform:rotate(150deg);animation-delay:-0.6s;}div:nth-child(7){transform:rotate(180deg);animation-delay:-0.5s;}div:nth-child(8){transform:rotate(210deg);animation-delay:-0.4s;}div:nth-child(9){transform:rotate(240deg);animation-delay:-0.3s;}div:nth-child(10){transform:rotate(270deg);animation-delay:-0.2s;}div:nth-child(11){transform:rotate(300deg);animation-delay:-0.1s;}div:nth-child(12){transform:rotate(330deg);animation-delay:0s;}@keyframes lds-spinner{0%{opacity:1;}100%{opacity:0;}}']),v=function(){return r.a.createElement(f,null,r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))},h=n(29),g=n(30),b=function(){function e(t,n,a){Object(h.a)(this,e),this.start=n,this.end=a,this.encodedMove=Math.abs(t)|n<<3|a<<10}return Object(g.a)(e,null,[{key:"fromEncodedMove",value:function(t){return new e(7&t,t>>3&127,t>>10&127)}}]),e}(),w=n(69),y=u.a.div.withConfig({displayName:"Field__FieldDiv",componentId:"l5smif-0"})(["position:relative;background-color:",";@media (min-aspect-ratio:99/100){width:12.5vh;height:12.5vh;}@media (max-aspect-ratio:100/99){width:12.5vw;height:12.5vw;}&.move-mark:before{position:absolute;top:4%;left:4%;bottom:4%;right:4%;content:'';display:block;border:0.5vh solid ",";border-radius:50%;}"],(function(e){return e.isEven?"#fdf6e3":"#eee8d5"}),(function(e){return e.markColor})),x=function(e){var t=e.boardIndex,n=e.children,a=e.movePiece,i=e.isEven,o=e.isStart,c=e.isEnd,l=e.isPossibleTarget,s=Object(w.a)({accept:"PIECE",drop:function(e,n){a(e.pieceId,e.boardIndex,t)}}),u=Object(d.a)(s,2)[1],m=o||c||l?"move-mark":"",p=l?"rgba(169,189,0,0.69)":o?"#dc322f9f":c?"#dc322faf":"white";return r.a.createElement(y,{ref:u,isEven:i,style:{position:"relative"},isStart:o,markColor:p,className:m},n)},k=n(70),E=n(33),j=n.n(E),P=n(34),O=n.n(P),C=n(35),M=n.n(C),_=n(36),I=n.n(_),S=n(37),D=n.n(S),N=n(38),G=n.n(N),B=n(39),R=n.n(B),A=n(40),T=n.n(A),q=n(41),F=n.n(q),L=n(42),Q=n.n(L),z=n(43),K=n.n(z),U=n(44),J=n.n(U),V=[j.a,M.a,D.a,R.a,F.a,K.a],W=[O.a,I.a,G.a,T.a,Q.a,J.a],Z=["Pawn","Knight","Bishop","Rook","Queen","King"],H=u.a.img.withConfig({displayName:"Piece__PieceImage",componentId:"xjorig-0"})(["display:block;margin:13%;height:74%;width:74%;&.dragging{visibility:hidden;}-webkit-transform:rotateZ(0deg);"]),X="undefined"!==typeof InstallTrigger,Y=function(e){var t=e.boardIndex,n=e.color,a=e.piece,i=e.onPickup,o=e.onDrop,c=Math.abs(a),l="black"===n?W[c-1]:V[c-1],s=Object(k.a)({item:{type:"PIECE",pieceId:c,boardIndex:t},begin:function(e){return i(t)},end:function(e){return o(t)},collect:function(e){return{isDragging:!!e.isDragging()}}}),u=Object(d.a)(s,2),m=u[0].isDragging,p=u[1],f=r.a.createElement(H,{ref:p,src:l,alt:Z[c-1],className:m?"dragging":""});return X?r.a.createElement("div",{ref:p},f):f},$=u.a.div.withConfig({displayName:"Board__BoardGrid",componentId:"sc-1rho0e0-0"})(["display:grid;grid-template-columns:repeat(8,1fr);grid-template-rows:repeat(8,1fr);box-shadow:3px 3px 3px #586e75;"]),ee=function(e){var t=e.board,n=e.isRotated,a=e.lastMove,i=e.currentPieceMoves,o=e.handlePlayerMove,c=e.updatePossibleMoves,l=e.clearPossibleMoves;return r.a.createElement($,{isRotated:n},t.slice(0,64).map((function(e,s){var d=n?63-s:s,u=t[d];return r.a.createElement(x,{key:d,boardIndex:d,movePiece:o,isEven:(d+(d>>3))%2===0,isStart:d===a.start,isEnd:d===a.end,isPossibleTarget:i.has(d)},0!==u&&r.a.createElement(Y,{boardIndex:d,color:u<0?"black":"white",piece:u,onPickup:c,onDrop:l}))})))},te=n(7),ne=n(9),ae=u.a.div.withConfig({displayName:"GameMenu__MenuBar",componentId:"sc-1evhkun-0"})(["display:flex;flex-direction:column;margin-top:1rem;margin-left:1.5rem;text-align:center;@media (max-aspect-ratio:100/99){margin-left:auto;margin-right:auto;flex-flow:column-reverse;}"]),re=u.a.div.withConfig({displayName:"GameMenu__MenuItem",componentId:"sc-1evhkun-1"})(["position:relative;display:",";padding-bottom:0.5rem;flex-direction:column;@media (max-aspect-ratio:100/99){flex-direction:row;align-self:center;}"],(function(e){return e.hidden?"none":"flex"})),ie=u.a.button.withConfig({displayName:"GameMenu__GameButton",componentId:"sc-1evhkun-2"})(["background:white;color:#073642;border:1px solid #073642;border-radius:0.3rem;font-size:1rem;font-weight:bold;padding:0.5rem 0.4rem;width:2.5rem;margin:0.3rem;box-shadow:1px 1px 1px #073642;&[disabled]{display:none;}&:hover{background:#073642;color:white;cursor:pointer;}"]),oe=Object(u.a)(re).withConfig({displayName:"GameMenu__GameResult",componentId:"sc-1evhkun-3"})(["margin-top:0.3rem;font-weight:bold;font-size:1.5rem;color:#073642;width:100%;align-items:center;svg{margin-left:1rem;margin-right:1rem;}"]),ce=u.a.input.withConfig({displayName:"GameMenu__IconRadioInput",componentId:"sc-1evhkun-4"})(["display:none;&:checked + label{opacity:1;}"]),le=u.a.label.withConfig({displayName:"GameMenu__IconRadioLabel",componentId:"sc-1evhkun-5"})(["color:#073642;margin:0.2rem;opacity:0.2;&:hover{opacity:0.5;cursor:pointer;}"]),se=function(e,t){return e?e===t?te.h:te.k:te.a},de=function(e){var t=e.currentValue,n=e.name,a=e.options,i=e.onChange;return r.a.createElement(r.a.Fragment,null,a.map((function(e){var a=e.value,o=e.description,c=e.icon;return r.a.createElement(r.a.Fragment,{key:"".concat(n,"-").concat(a)},r.a.createElement(ce,{type:"radio",id:"".concat(n,"-").concat(a),name:n,value:a,defaultChecked:t===a,onChange:function(e){return i(e.target.value)}}),r.a.createElement(le,{htmlFor:"".concat(n,"-").concat(a)},r.a.createElement(ne.a,{icon:c,title:o,size:"2x"})))})))},ue=function(e){var t=e.isAiThinking,n=e.firstMovePlayed,a=e.humanPlayerColor,i=e.gameEnded,o=e.winningPlayerColor,c=e.startNewGame,l=e.switchSides,s=e.rotateBoard,d=e.difficultyLevel,u=e.setDifficultyLevel,m=e.canUndoMove,p=e.undoMove;return r.a.createElement(ae,null,i&&r.a.createElement(oe,null,r.a.createElement(ne.a,{icon:se(o,a),size:"2x"}),o?(1===o?"White":"Black")+" wins!":"Draw!"),r.a.createElement(re,{hidden:t},r.a.createElement(ie,{disabled:!n,onClick:c},r.a.createElement(ne.a,{icon:te.i,title:"Start new game"})),r.a.createElement(ie,{disabled:i||n,onClick:l},r.a.createElement(ne.a,{icon:te.g,title:"Switch sides"})),r.a.createElement(ie,{disabled:!m||i,onClick:p},r.a.createElement(ne.a,{icon:te.l,title:"Undo move"})),r.a.createElement(ie,{disabled:i||!n,onClick:s},r.a.createElement(ne.a,{icon:te.j,title:"Rotate board"}))),r.a.createElement(re,{hidden:t||i},r.a.createElement(de,{currentValue:d,name:"difficulty-level",onChange:u,options:[{value:1,description:"Difficulty level 1 (easy)",icon:te.d},{value:2,description:"Difficulty level 2",icon:te.f},{value:3,description:"Difficulty level 3",icon:te.e},{value:4,description:"Difficulty level 4",icon:te.c},{value:5,description:"Difficulty level 5 (hard)",icon:te.b}]})),t&&r.a.createElement(v,null))},me=p()(),pe=u.a.div.withConfig({displayName:"Game__GameArea",componentId:"qivay-0"})(["display:flex;flex-wrap:wrap;"]),fe="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",ve=u.a.div.withConfig({displayName:"Game__Centered",componentId:"qivay-1"})(["position:absolute;left:calc(50% - 60px);top:calc(50% - 60px);"]),he=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(1),c=Object(d.a)(o,2),u=c[0],m=c[1],p=Object(a.useState)(1),f=Object(d.a)(p,2),h=f[0],g=f[1],w=Object(a.useState)(!1),y=Object(d.a)(w,2),x=y[0],k=y[1],E=Object(a.useState)(),j=Object(d.a)(E,2),P=j[0],O=j[1],C=Object(a.useState)(!1),M=Object(d.a)(C,2),_=M[0],I=M[1],S=Object(a.useState)([]),D=Object(d.a)(S,2),N=D[0],G=D[1],B=Object(a.useState)(new Set),R=Object(d.a)(B,2),A=R[0],T=R[1],q=Object(a.useState)(),F=Object(d.a)(q,2),L=F[0],Q=F[1],z=Object(a.useState)(3),K=Object(d.a)(z,2),U=K[0],J=K[1],V=Object(a.useState)([]),W=Object(d.a)(V,2),Z=W[0],H=W[1],X=Z.length>0?Z[Z.length-1]:{start:-1,end:-1},Y=Object(a.useCallback)((function(e){return H([].concat(Object(s.a)(Z),[e]))}),[H,Z]),$=Object(a.useCallback)((function(e){return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:O(e.board),G(e.moves),m(e.activePlayer),e.gameEnded&&(I(!0),e.checkMate&&Q(-e.activePlayer));case 4:case"end":return t.stop()}}))}),[]),te=Object(a.useCallback)((function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(me.performMove(e));case 2:return t=n.sent,k(!1),n.next=6,l.a.awrap($(t));case 6:Y(e);case 7:case"end":return n.stop()}}))}),[$,Y]);Object(a.useEffect)((function(){!function(){var e;l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(me.init());case 2:return t.next=4,l.a.awrap(me.newGame());case 4:return t.next=6,l.a.awrap(me.setPosition(fe,[]));case 6:return e=t.sent,t.next=9,l.a.awrap($(e));case 9:case"end":return t.stop()}}))}()}),[$]);var ne=function(e,t){return N.some((function(n){return n.start===e&&n.end===t}))},ae=Object(a.useCallback)((function(){var e;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return G([]),k(!0),t.next=4,l.a.awrap(me.calculateMove(U));case 4:return e=t.sent,t.next=7,l.a.awrap(te(e));case 7:case"end":return t.stop()}}))}),[U,te]);Object(a.useEffect)((function(){h!==u&&ae()}),[h,u,ae]);var re=Object(a.useCallback)((function(){var e,t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=Z.slice(0,Z.length-2),n.next=3,l.a.awrap(me.setPosition(fe,e));case 3:return t=n.sent,H(e),n.next=7,l.a.awrap($(t));case 7:case"end":return n.stop()}}))}),[Z,H,$]);return P?r.a.createElement(pe,null,r.a.createElement(ee,{board:P,isRotated:n,lastMove:X,currentPieceMoves:A,handlePlayerMove:function(e,t,n){var a,r,i,o;return l.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(a=Math.abs(e),!_&&!x){c.next=3;break}return c.abrupt("return");case 3:if(ne(t,n)){c.next=5;break}return c.abrupt("return");case 5:if(T(new Set),1!==a||!(1===u&&n<8||-1===u&&n>=56)){c.next=19;break}r=prompt("Choose promotion (Q, R, B, N)","Q"),c.t0=r.toUpperCase(),c.next="R"===c.t0?11:"B"===c.t0?13:"N"===c.t0?15:(c.t0,17);break;case 11:return a=4,c.abrupt("break",19);case 13:return a=3,c.abrupt("break",19);case 15:return a=2,c.abrupt("break",19);case 17:return a=5,c.abrupt("break",19);case 19:return(i=P.slice())[t]=0,O(i),c.next=24,l.a.awrap(me.performMove(new b(a,t,n)));case 24:return o=c.sent,Y(new b(e,t,n)),c.next=28,l.a.awrap($(o));case 28:case"end":return c.stop()}}))},updatePossibleMoves:function(e){var t=N.filter((function(t){return t.start===e})).map((function(e){return e.end}));T(new Set(t))},clearPossibleMoves:function(){T(new Set)}}),r.a.createElement(ue,{isAiThinking:x,firstMovePlayed:-1!==X.start,humanPlayerColor:h,gameEnded:_,winningPlayerColor:L,startNewGame:function(){var e;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return m(1),g(1),t.next=4,l.a.awrap(me.newGame());case 4:return t.next=6,l.a.awrap(me.setPosition(fe,[]));case 6:return e=t.sent,i(!1),I(!1),H([]),Q(void 0),T(new Set),t.next=14,l.a.awrap($(e));case 14:case"end":return t.stop()}}))},switchSides:function(){i(!0),g(-h)},rotateBoard:function(){return i(!n)},difficultyLevel:U,setDifficultyLevel:J,canUndoMove:!_&&Z.length>1,undoMove:re})):r.a.createElement(ve,null,r.a.createElement(v,null))},ge=n(68),be=n(45),we=n(46),ye=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n=t.map((function(t){return t(e)}));return{setup:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n.forEach((function(e){return e.setup.apply(e,t)}))},teardown:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n.forEach((function(e){return e.teardown.apply(e,t)}))},connectDropTarget:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n.forEach((function(e){return e.connectDropTarget.apply(e,t)}))},connectDragPreview:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n.forEach((function(e){return e.connectDragPreview.apply(e,t)}))},connectDragSource:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n.forEach((function(e){return e.connectDragSource.apply(e,t)}))}}}};var xe=function(){return r.a.createElement("main",null,r.a.createElement(ge.a,{backend:ye(be.a,we.a)},r.a.createElement(he,null)))};o.a.render(r.a.createElement(xe,null),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.c96df5be.chunk.js.map