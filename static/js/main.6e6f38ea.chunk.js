(this.webpackJsonpchess=this.webpackJsonpchess||[]).push([[0],{20:function(e,n,t){var r=t(50),a=["calculateMove"];e.exports=function(){var e=new Worker(t.p+"a9373bee334b3cdcc7d7.worker.js",{name:"[hash].worker.js"});return r(e,a),e}},25:function(e,n,t){e.exports=t.p+"static/media/white_pawn.41da1b5b.svg"},26:function(e,n,t){e.exports=t.p+"static/media/black_pawn.3cab4671.svg"},27:function(e,n,t){e.exports=t.p+"static/media/white_knight.3ece5029.svg"},28:function(e,n,t){e.exports=t.p+"static/media/black_knight.88ad52be.svg"},29:function(e,n,t){e.exports=t.p+"static/media/white_bishop.36a96cf8.svg"},30:function(e,n,t){e.exports=t.p+"static/media/black_bishop.341337f4.svg"},31:function(e,n,t){e.exports=t.p+"static/media/white_rook.007b43f5.svg"},32:function(e,n,t){e.exports=t.p+"static/media/black_rook.e7f61dec.svg"},33:function(e,n,t){e.exports=t.p+"static/media/white_queen.51d538db.svg"},34:function(e,n,t){e.exports=t.p+"static/media/black_queen.87612c77.svg"},35:function(e,n,t){e.exports=t.p+"static/media/white_king.9e716b1e.svg"},36:function(e,n,t){e.exports=t.p+"static/media/black_king.12ae1430.svg"},44:function(e,n,t){e.exports=t(58)},49:function(e,n,t){},58:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),i=t(19),o=t.n(i),c=(t(49),t(3)),u=t(2),s=t(20),l=t.n(s),f=t(40),d=Object(f.a)(Array(16).keys()).map((function(e){return 1<<e+13})),p=function(e){return e[e.length-1]},m=function(e){return 0!==(128&p(e))},h=function(e){return 0!==(256&p(e))},g=function(e){return 0!==(512&p(e))},v=function(e){return 0!==(1024&p(e))},b=function(e){return 0!==(2048&p(e))},w=function(e){return 0!==(4096&p(e))},k=function(e){e[e.length-1]=512|p(e)},M=function(e){e[e.length-1]=1024|p(e)},y=function(e){e[e.length-1]=2048|p(e)},E=function(e){e[e.length-1]=4096|p(e)},x={PAWN:{id:1,name:"Pawn",value:1},KNIGHT:{id:2,name:"Knight",value:3},BISHOP:{id:3,name:"Bishop",value:3},ROOK:{id:4,name:"Rook",value:5},QUEEN:{id:5,name:"Queen",value:9},KING:{id:6,name:"King",value:10}},O=Object.values(x).sort((function(e,n){return e.id-n.id})).map((function(e){return e})),_=function(e){return O[e-1]},I=x.PAWN.id,P=x.KNIGHT.id,j=x.BISHOP.id,N=x.ROOK.id,C=x.QUEEN.id,S=x.KING.id,G=function(e,n,t,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(99===e[a])return!1;var o=Math.sign(e[r]);if(n!==o)return!1;var c=Math.sign(e[a]);if(o===c)return!1;if(!i&&X(e,{piece:t,start:r,end:a},n))return!1;var u=-o;if(a-r===10*u&&0===e[a])return!0;var s=1===o?81:31,l=1===o?88:38,f=r>=s&&r<=l,d=0===e[r+10*u];return!(a-r!==20*u||!f||!d||0!==e[a])||((a-r===11*u||a-r===9*u)&&0!==e[a]||!(a-r!==11*u&&a-r!==9*u||0!==e[a]||!D(e,o,a)))},D=function(e,n,t){var r=p(e);return t>40&&t<49&&1===n?0!==(r&d[t-41]):t>70&&t<79&&-1===n&&0!==(r&d[t-71+8])},A=function(){return[x.QUEEN,x.ROOK,x.BISHOP,x.KNIGHT]},K=[21,19,12,8,-12,-21,-19,-8],B=function(e,n,t,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(99===e[a])return!1;var o=Math.sign(e[r]);if(n!==o)return!1;var c=Math.sign(e[a]);return o!==c&&(!(!i&&X(e,{piece:t,start:r,end:a},n))&&K.some((function(e){return a===r+e})))},T=[9,11,-9,-11],R=function(e,n,t,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(99===e[a])return!1;var o=Math.sign(e[r]);if(n!==o)return!1;var c=Math.sign(e[a]);return o!==c&&(!(!i&&X(e,{piece:t,start:r,end:a},n))&&T.some((function(n){for(var t=1;t<=7;t++){if(a===r+n*t)return!0;if(0!==e[r+n*t])return!1}return!1})))},H=function(e,n,t,r){return T.flatMap((function(a){for(var i=[],o=1;o<=7;o++){if(!R(e,n,t,r,r+a*o)){if(0===e[r+a*o])continue;return i}i.push({piece:t,start:r,end:r+a*o})}return i}))},Q=[1,10,-1,-10],U=function(e,n,t,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(99===e[a])return!1;var o=Math.sign(e[r]);if(n!==o)return!1;var c=Math.sign(e[a]);return o!==c&&(!(!i&&X(e,{piece:t,start:r,end:a},n))&&Q.some((function(n){for(var t=1;t<=7;t++){if(a===r+n*t)return!0;if(0!==e[r+n*t])return!1}return!1})))},z=function(e,n,t,r){return Q.flatMap((function(a){for(var i=[],o=1;o<=7;o++){if(!U(e,n,t,r,r+a*o)){if(0===e[r+a*o])continue;return i}i.push({piece:t,start:r,end:r+a*o})}return i}))},W=Q.concat(T),q=function(e,n,t,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(99===e[a])return!1;var o=Math.sign(e[r]);if(n!==o)return!1;var c=Math.sign(e[a]);if(o===c)return!1;if(!m(e)){if(!v(e)&&1===n&&95===r&&97===a&&0===e[96]&&0===e[97]&&!Z(e,-n,95)&&!Z(e,-n,96)&&!Z(e,-n,97))return!0;if(!g(e)&&1===n&&95===r&&93===a&&0===e[94]&&0===e[93]&&0===e[92]&&!Z(e,-n,95)&&!Z(e,-n,94)&&!Z(e,-n,93)&&!Z(e,-n,92))return!0}if(!h(e)){if(!w(e)&&-1===n&&25===r&&27===a&&0===e[26]&&0===e[27]&&!Z(e,-n,25)&&!Z(e,-n,26)&&!Z(e,-n,27))return!0;if(!b(e)&&-1===n&&25===r&&23===a&&0===e[24]&&0===e[23]&&0===e[22]&&!Z(e,-n,25)&&!Z(e,-n,24)&&!Z(e,-n,23)&&!Z(e,-n,22))return!0}var u=W.some((function(e){return r+e===a}));return u&&(i||!X(e,{piece:t,start:r,end:a},n))},F=function(e,n){var t=n.piece,r=n.start,a=n.end,i=Math.sign(e[r]),o=e[a];return e[r]=0,1===t.id&&0===e[a]&&(9===Math.abs(r-a)?(o=e[r+i],e[r+i]=0,n.enPassant=!0):11===Math.abs(r-a)&&(o=e[r-i],e[r-i]=0,n.enPassant=!0)),e[a]=t.id*i,6===t.id&&(1===i?function(e){e[e.length-1]=128|p(e)}(e):function(e){e[e.length-1]=256|p(e)}(e),2===Math.abs(r-a)&&(97===a?(e[96]=e[98],e[98]=0,M(e)):93===a?(e[94]=e[91],e[91]=0,k(e)):27===a?(e[26]=e[28],e[28]=0,E(e)):23===a&&(e[24]=e[21],e[21]=0,y(e)))),4===t.id&&(91===r?k(e):98===r?M(e):21===r?y(e):28===r&&E(e)),J(e),1===t.id&&20===Math.abs(r-a)&&L(e,r,i),o},J=function(e){e[e.length-1]=p(e)&d[0]-1},L=function(e,n,t){var r=-1===t?n-31:n-81+8;e[e.length-1]=p(e)|d[r]},V=function(e,n){var t=e.findIndex((function(e){return e===x.KING.id*n}));return!t||Z(e,-n,t)},X=function(e,n,t){var r=p(e),a=F(e,n),i=V(e,t);return function(e,n,t,r){var a=n.start,i=n.end,o=n.piece,c=n.enPassant;if(e[e.length-1]=r,e[a]=e[i],e[i]=c?0:t,c){var u=Math.sign(e[a]);9===Math.abs(a-i)?e[a+u]=t:11===Math.abs(a-i)&&(e[a-u]=t)}6===o.id&&2===Math.abs(a-i)&&(97===i?(e[98]=e[96],e[96]=0):93===i?(e[91]=e[94],e[94]=0):27===i?(e[28]=e[26],e[26]=0):23===i&&(e[21]=e[24],e[24]=0))}(e,n,a,r),i},Y=[G,B,R,U,function(e,n,t,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return R(e,n,t,r,a,i)||U(e,n,t,r,a,i)},q],Z=function(e,n,t){return e.some((function(r,a){if(a===e.length-1)return!1;if(0===r||99===r)return!1;if(Math.sign(r)!==n)return!1;var i=Math.abs(r),o=_(i);return(0,Y[i-1])(e,n,o,a,t,!0)}))},$=[function(e,n,t,r){var a=-n;return 1===n&&r<39?[9,10,11,20].filter((function(i){return G(e,n,t,r,r+i*a)})).flatMap((function(e){return A().map((function(n){return{piece:n,start:r,end:r+e*a}}))})):-1===n&&r>80?[9,10,11,20].filter((function(i){return G(e,n,t,r,r+i*a)})).flatMap((function(e){return A().map((function(n){return{piece:n,start:r,end:r+e*a}}))})):[9,10,11,20].filter((function(i){return G(e,n,t,r,r+i*a)})).map((function(e){return{piece:t,start:r,end:r+e*a}}))},function(e,n,t,r){return K.filter((function(a){return B(e,n,t,r,r+a)})).map((function(e){return{piece:t,start:r,end:r+e}}))},H,z,function(e,n,t,r){return H(e,n,t,r).concat(z(e,n,t,r))},function(e,n,t,r){var a=W.filter((function(a){return q(e,n,t,r,r+a)})).map((function(e){return{piece:t,start:r,end:r+e}}));return(1===n&&95===r||-1===n&&25===r)&&(q(e,n,t,r,r+2)&&a.push({piece:t,start:r,end:r+2}),q(e,n,t,r,r-2)&&a.push({piece:t,start:r,end:r-2})),a}],ee=function(e,n){return e.flatMap((function(t,r){if(r===e.length-1)return[];if(0===t||99===t)return[];if(Math.sign(t)!==n)return[];var a=Math.abs(t),i=_(a);return(0,$[a-1])(e,n,i,r)}))},ne=function(e,n){return V(e,n)&&0===ee(e,n).length},te=t(61),re=u.a.div.withConfig({displayName:"Field__FieldDiv",componentId:"l5smif-0"})(["position:relative;&:nth-child(even){background-color:#f8f5df;}&.move-mark:before{position:absolute;top:4%;left:4%;bottom:4%;right:4%;content:'';display:block;border:0.5vh solid ",";border-radius:50%;}"],(function(e){return e.markColor})),ae=function(e){var n=e.boardIndex,t=e.children,r=e.movePiece,i=e.isStart,o=e.isEnd,u=e.isPossibleTarget,s=Object(te.a)({accept:"PIECE",drop:function(e,t){r(e.piece,e.boardIndex,n)}}),l=Object(c.a)(s,2)[1],f=i||o||u?"move-mark":"",d=u?"#80fa72":i?"lightpink":o?"salmon":"white";return a.a.createElement(re,{ref:l,style:{position:"relative"},isStart:i,markColor:d,className:f},t)},ie=t(62),oe=t(25),ce=t.n(oe),ue=t(26),se=t.n(ue),le=t(27),fe=t.n(le),de=t(28),pe=t.n(de),me=t(29),he=t.n(me),ge=t(30),ve=t.n(ge),be=t(31),we=t.n(be),ke=t(32),Me=t.n(ke),ye=t(33),Ee=t.n(ye),xe=t(34),Oe=t.n(xe),_e=t(35),Ie=t.n(_e),Pe=t(36),je=t.n(Pe),Ne=[ce.a,fe.a,he.a,we.a,Ee.a,Ie.a],Ce=[se.a,pe.a,ve.a,Me.a,Oe.a,je.a],Se=u.a.div.withConfig({displayName:"Piece__PieceContainer",componentId:"xjorig-0"})(["-webkit-transform:translate3d(0,0,0);"]),Ge=u.a.img.withConfig({displayName:"Piece__PieceImage",componentId:"xjorig-1"})(["display:block;margin:13%;height:74%;width:74%;&.dragging{visibility:hidden;}"]),De=function(e){var n=e.boardIndex,t=e.color,r=e.piece,i=e.onPickup,o=e.onDrop,u="black"===t?Ce[r.id-1]:Ne[r.id-1],s=Object(ie.a)({item:{type:"PIECE",piece:r,boardIndex:n},begin:function(e){return i(n)},end:function(e){return o(n)},collect:function(e){return{isDragging:!!e.isDragging()}}}),l=Object(c.a)(s,2),f=l[0].isDragging,d=l[1];return a.a.createElement(Se,{ref:d},a.a.createElement(Ge,{src:u,alt:r.name,className:f?"dragging":""}))},Ae=u.a.div.withConfig({displayName:"Board__BoardGrid",componentId:"sc-1rho0e0-0"})(["display:grid;grid-template-columns:0 repeat(8,1fr);grid-template-rows:0 repeat(8,1fr);border-right:1px solid salmon;@media (min-aspect-ratio:99/100){width:100vh;height:100vh;}@media (max-aspect-ratio:100/99){width:100vw;height:100vw;}"]),Ke=function(e){var n=e.board,t=e.lastMove,r=e.currentPieceMoves,i=e.handlePlayerMove,o=e.updatePossibleMoves,c=e.clearPossibleMoves;return a.a.createElement(Ae,null,n.map((function(e,n){return n%10===9||n>=100||n<10?null:99===e?a.a.createElement("div",{key:n,className:"board_frame"}):a.a.createElement(ae,{key:n,boardIndex:n,movePiece:i,isStart:n===t.start,isEnd:n===t.end,isPossibleTarget:r.has(n)},0!==e&&a.a.createElement(De,{boardIndex:n,color:e<0?"black":"white",piece:_(Math.abs(e)),onPickup:o,onDrop:c}))})))},Be=t(37);function Te(){var e=Object(Be.a)(["\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"]);return Te=function(){return e},e}var Re=u.a.div.withConfig({displayName:"GameMenu__MenuBar",componentId:"sc-1evhkun-0"})(["display:flex;flex-direction:column;margin:1rem;text-align:center;@media (max-aspect-ratio:100/99){width:100%;}"]),He=u.a.div.withConfig({displayName:"GameMenu__MenuItem",componentId:"sc-1evhkun-1"})(["position:relative;display:",";align-self:center;padding-bottom:0.5rem;"],(function(e){return e.hidden?"none":"flex"})),Qe=u.a.button.withConfig({displayName:"GameMenu__GameButton",componentId:"sc-1evhkun-2"})(["background:none;border:1px solid salmon;border-radius:0.5rem;color:salmon;font-size:1rem;font-weight:bold;padding:0.5rem;width:11rem;&:hover{background:salmon;color:white;cursor:pointer;}"]),Ue=u.a.label.withConfig({displayName:"GameMenu__Label",componentId:"sc-1evhkun-3"})(["position:absolute;top:1.3rem;width:100%;text-align:center;font-size:0.8rem;color:gray;"]),ze=Object(u.a)(He).withConfig({displayName:"GameMenu__ThinkingIndicator",componentId:"sc-1evhkun-4"})(["font-weight:bold;margin-left:1rem;font-size:1rem;text-align:center;color:salmon;"]),We=Object(u.b)(Te()),qe=u.a.div.withConfig({displayName:"GameMenu__AnimatedDualRing",componentId:"sc-1evhkun-5"})(["display:inline-block;width:128px;height:128px;&:after{content:' ';display:block;width:80px;height:80px;margin:8px;border-radius:50%;border:6px solid salmon;border-color:salmon transparent salmon transparent;animation:"," 1.2s linear infinite;}"],We),Fe=Object(u.a)(He).withConfig({displayName:"GameMenu__GameResult",componentId:"sc-1evhkun-6"})(["padding-top:2rem;font-weight:bold;font-size:1.5rem;color:salmon;"]),Je=function(e){var n=e.isAiThinking,t=e.gameEnded,r=e.winningPlayerColor,i=e.startNewGame,o=e.forceAiMove,c=e.searchDepth,u=e.setSearchDepth;return a.a.createElement(Re,null,a.a.createElement(He,{hidden:n},a.a.createElement(Qe,{disabled:n,onClick:i},"New Game")),a.a.createElement(He,{hidden:n||t},a.a.createElement(Qe,{disabled:n||t,onClick:o,title:"Let computer play the current color"},"Computer Move")),a.a.createElement(He,{hidden:n},a.a.createElement(Ue,{htmlFor:"game-menu_difficulty-slider"},"Difficulty"),a.a.createElement("input",{id:"game-menu_difficulty-slider",type:"range",min:"3",max:"5",title:"Difficulty",value:c,onChange:function(e){return u(e.target.value)}})),n&&a.a.createElement(ze,null,a.a.createElement(qe,null,"Thinking ...")),t&&a.a.createElement(Fe,null,r?(1===r?"White":"Black")+" wins!":"Stalemate!"))},Le=l()(),Ve=[99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,-N,-P,-j,-C,-S,-j,-P,-N,99,99,-I,-I,-I,-I,-I,-I,-I,-I,99,99,0,0,0,0,0,0,0,0,99,99,0,0,0,0,0,0,0,0,99,99,0,0,0,0,0,0,0,0,99,99,0,0,0,0,0,0,0,0,99,99,I,I,I,I,I,I,I,I,99,99,N,P,j,C,S,j,P,N,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,0],Xe=u.a.div.withConfig({displayName:"Game__GameArea",componentId:"qivay-0"})(["display:flex;flex-wrap:wrap;"]),Ye=function(){var e=Object(r.useState)(1),n=Object(c.a)(e,2),t=n[0],i=n[1],o=Object(r.useState)(!1),u=Object(c.a)(o,2),s=u[0],l=u[1],f=Object(r.useState)(Ve),d=Object(c.a)(f,2),p=d[0],m=d[1],h=Object(r.useState)(!1),g=Object(c.a)(h,2),v=g[0],b=g[1],w=Object(r.useState)({start:-1,end:-1}),k=Object(c.a)(w,2),M=k[0],y=k[1],E=Object(r.useState)(ee(p,t)),O=Object(c.a)(E,2),_=O[0],I=O[1],P=Object(r.useState)(new Set),j=Object(c.a)(P,2),N=j[0],C=j[1],S=Object(r.useState)(),G=Object(c.a)(S,2),D=G[0],A=G[1],K=Object(r.useState)(5),B=Object(c.a)(K,2),T=B[0],R=B[1],H=function(e,n,t){l(!1),y(n);var r=e.slice(0);if(F(r,n),m(r),ne(r,-t))return b(!0),void A(t);var a=ee(r,-t);(I(a),0!==a.length)?i(-t):b(!0)};return a.a.createElement(Xe,null,a.a.createElement(Ke,{board:p,lastMove:M,currentPieceMoves:N,handlePlayerMove:function(e,n,r){if(!v&&!s&&function(e,n){return _.some((function(t){return t.start===e&&t.end===n}))}(n,r)){if(y({start:n,end:r}),"Pawn"===e.name&&1===t&&r<29)switch(prompt("Choose promotion (Q, R, B, K)","Q").toUpperCase()){case"R":e=x.ROOK;break;case"B":e=x.BISHOP;break;case"K":e=x.KNIGHT;break;case"Q":default:e=x.QUEEN}var a=p.slice(0);if(F(a,{piece:e,start:n,end:r}),m(a),ne(a,-t))return b(!0),void A(t);0!==ee(a,-t).length?(l(!0),I([]),Le.calculateMove(a,-t,T).then((function(e){return H(a,e,-t)})),i(-t)):b(!0)}},updatePossibleMoves:function(e){var n=_.filter((function(n){return n.start===e})).map((function(e){return e.end}));C(new Set(n))},clearPossibleMoves:function(){C(new Set)}}),a.a.createElement(Je,{isAiThinking:s,gameEnded:v,winningPlayerColor:D,startNewGame:function(){m(Ve),i(1),b(!1),y({start:-1,end:-1}),A(void 0),I(ee(Ve,t)),C(new Set)},forceAiMove:function(){l(!0),Le.calculateMove(p,t,T).then((function(e){H(p,e,t)}))},searchDepth:T,setSearchDepth:R}))},Ze=t(60),$e=t(38),en=t(39),nn=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e){var t=n.map((function(n){return n(e)}));return{setup:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.forEach((function(e){return e.setup.apply(e,n)}))},teardown:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.forEach((function(e){return e.teardown.apply(e,n)}))},connectDropTarget:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.forEach((function(e){return e.connectDropTarget.apply(e,n)}))},connectDragPreview:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.forEach((function(e){return e.connectDragPreview.apply(e,n)}))},connectDragSource:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.forEach((function(e){return e.connectDragSource.apply(e,n)}))}}}};var tn=function(){return a.a.createElement("main",null,a.a.createElement(Ze.a,{backend:nn($e.a,en.a)},a.a.createElement(Ye,null)))};o.a.render(a.a.createElement(tn,null),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.6e6f38ea.chunk.js.map