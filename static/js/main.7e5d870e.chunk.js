(this["webpackJsonpwasabi-chess"]=this["webpackJsonpwasabi-chess"]||[]).push([[0],{27:function(e,t,n){var a=n(60),r=["init","newGame","calculateMove","performMove","setPosition"];e.exports=function(){var e=new Worker(n.p+"8bd223f926d388d91d19.worker.js",{name:"[hash].worker.js"});return a(e,r),e}},34:function(e,t,n){e.exports=n.p+"static/media/white_pawn.41da1b5b.svg"},35:function(e,t,n){e.exports=n.p+"static/media/black_pawn.3cab4671.svg"},36:function(e,t,n){e.exports=n.p+"static/media/white_knight.3ece5029.svg"},37:function(e,t,n){e.exports=n.p+"static/media/black_knight.88ad52be.svg"},38:function(e,t,n){e.exports=n.p+"static/media/white_bishop.36a96cf8.svg"},39:function(e,t,n){e.exports=n.p+"static/media/black_bishop.341337f4.svg"},40:function(e,t,n){e.exports=n.p+"static/media/white_rook.007b43f5.svg"},41:function(e,t,n){e.exports=n.p+"static/media/black_rook.e7f61dec.svg"},42:function(e,t,n){e.exports=n.p+"static/media/white_queen.51d538db.svg"},43:function(e,t,n){e.exports=n.p+"static/media/black_queen.87612c77.svg"},44:function(e,t,n){e.exports=n.p+"static/media/white_king.9e716b1e.svg"},45:function(e,t,n){e.exports=n.p+"static/media/black_king.12ae1430.svg"},53:function(e,t,n){e.exports=n(68)},58:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(26),o=n.n(i),c=(n(58),n(4)),l=n.n(c),s=n(8),u=n(48),d=n(5),m=n(3),f=n(27),p=n.n(f),v=m.a.div.withConfig({displayName:"AnimatedSpinner",componentId:"sc-1odzgi2-0"})(['color:#073642;display:inline-block;position:relative;width:80px;height:80px;margin-top:1rem;margin-right:0.5rem;margin-left:1.5rem;div{transform-origin:40px 40px;animation:lds-spinner 1.2s linear infinite;}div:after{content:" ";display:block;position:absolute;top:3px;left:37px;width:6px;height:18px;border-radius:20%;background:#073642;}div:nth-child(1){transform:rotate(0deg);animation-delay:-1.1s;}div:nth-child(2){transform:rotate(30deg);animation-delay:-1s;}div:nth-child(3){transform:rotate(60deg);animation-delay:-0.9s;}div:nth-child(4){transform:rotate(90deg);animation-delay:-0.8s;}div:nth-child(5){transform:rotate(120deg);animation-delay:-0.7s;}div:nth-child(6){transform:rotate(150deg);animation-delay:-0.6s;}div:nth-child(7){transform:rotate(180deg);animation-delay:-0.5s;}div:nth-child(8){transform:rotate(210deg);animation-delay:-0.4s;}div:nth-child(9){transform:rotate(240deg);animation-delay:-0.3s;}div:nth-child(10){transform:rotate(270deg);animation-delay:-0.2s;}div:nth-child(11){transform:rotate(300deg);animation-delay:-0.1s;}div:nth-child(12){transform:rotate(330deg);animation-delay:0s;}@keyframes lds-spinner{0%{opacity:1;}100%{opacity:0;}}']),h=function(){return r.a.createElement(v,null,r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))},g=n(30),b=n(31),w=function(){function e(t,n,a){Object(g.a)(this,e),this.start=n,this.end=a,this.encodedMove=Math.abs(t)|n<<3|a<<10}return Object(b.a)(e,null,[{key:"fromEncodedMove",value:function(t){return new e(7&t,t>>3&127,t>>10&127)}}]),e}(),x=n(71),y=m.a.div.withConfig({displayName:"Field__FieldDiv",componentId:"sc-43cd1f-0"})(["position:relative;background-color:",";@media (min-aspect-ratio:99/100){width:12.5vh;height:12.5vh;}@media (max-aspect-ratio:100/99){width:12.5vw;height:12.5vw;}&.move-mark:before{position:absolute;top:4%;left:4%;bottom:4%;right:4%;content:'';display:block;border:0.5vh solid ",";border-radius:50%;}"],(function(e){return e.isEven?"#fdf6e3":"#eee8d5"}),(function(e){return e.markColor})),k=function(e){var t=e.boardIndex,n=e.children,a=e.movePiece,i=e.isEven,o=e.isStart,c=e.isEnd,l=e.isPossibleTarget,s=Object(x.a)({accept:"PIECE",drop:function(e,n){a(e.pieceId,e.boardIndex,t)}}),u=Object(d.a)(s,2)[1],m=o||c||l?"move-mark":"",f=l?"rgba(169,189,0,0.69)":o?"#dc322f9f":c?"#dc322faf":"white";return r.a.createElement(y,{ref:u,isEven:i,style:{position:"relative"},isStart:o,markColor:f,className:m},n)},E=n(51),j=n(72),O=n(34),P=n.n(O),C=n(35),_=n.n(C),M=n(36),I=n.n(M),S=n(37),D=n.n(S),N=n(38),G=n.n(N),R=n(39),B=n.n(R),A=n(40),T=n.n(A),z=n(41),F=n.n(z),L=n(42),q=n.n(L),K=n(43),Q=n.n(K),U=n(44),J=n.n(U),V=n(45),W=n.n(V),Z=[P.a,I.a,G.a,T.a,q.a,J.a],H=[_.a,D.a,B.a,F.a,Q.a,W.a],X=["Pawn","Knight","Bishop","Rook","Queen","King"],Y=m.a.img.withConfig({displayName:"Piece__Image",componentId:"sc-5fuekr-0"})(["display:block;margin:13%;height:74%;width:74%;&.dragging{visibility:hidden;}-webkit-transform:rotateZ(0deg);"]),$="undefined"!==typeof InstallTrigger,ee=function(e){var t=e.color,n=e.pieceId,a=Object(E.a)(e,["color","pieceId"]),i=-1===t?H[n-1]:Z[n-1];return r.a.createElement(Y,Object.assign({src:i,alt:X[n-1]},a))},te=function(e){var t=e.boardIndex,n=e.color,a=e.piece,i=e.onPickup,o=e.onDrop,c=Math.abs(a),l=-1===n?H[c-1]:Z[c-1],s=Object(j.a)({item:{type:"PIECE",pieceId:c,boardIndex:t},begin:function(e){return i(t)},end:function(e){return o(t)},collect:function(e){return{isDragging:!!e.isDragging()}}}),u=Object(d.a)(s,2),m=u[0].isDragging,f=u[1],p=r.a.createElement(Y,{ref:f,src:l,className:m?"dragging":""});return $?r.a.createElement("div",{ref:f},p):p},ne=m.a.div.withConfig({displayName:"Board__BoardGrid",componentId:"r10xh7-0"})(["display:grid;grid-template-columns:repeat(8,1fr);grid-template-rows:repeat(8,1fr);@media (min-aspect-ratio:99/100){width:100vh;height:100vh;}@media (max-aspect-ratio:100/99){width:100vw;height:100vw;}box-shadow:3px 3px 3px #586e75;"]),ae=function(e){var t=e.board,n=e.isRotated,a=e.lastMove,i=e.currentPieceMoves,o=e.handlePlayerMove,c=e.updatePossibleMoves,l=e.clearPossibleMoves;return r.a.createElement(ne,{isRotated:n},t.slice(0,64).map((function(e,s){var u=n?63-s:s,d=t[u];return r.a.createElement(k,{key:u,boardIndex:u,movePiece:o,isEven:(u+(u>>3))%2===0,isStart:u===a.start,isEnd:u===a.end,isPossibleTarget:i.has(u)},0!==d&&r.a.createElement(te,{boardIndex:u,color:d<0?-1:1,piece:d,onPickup:c,onDrop:l}))})))},re=n(7),ie=n(10),oe=m.a.div.withConfig({displayName:"GameMenu__MenuBar",componentId:"sc-1mfgk5w-0"})(["display:flex;flex-direction:column;margin-top:1rem;margin-left:1.5rem;text-align:center;align-items:center;@media (max-aspect-ratio:100/99){margin-left:auto;margin-right:auto;flex-flow:column-reverse;}"]),ce=m.a.div.withConfig({displayName:"GameMenu__MenuItem",componentId:"sc-1mfgk5w-1"})(["position:relative;display:",";padding-bottom:0.5rem;flex-direction:column;@media (max-aspect-ratio:100/99){flex-direction:row;align-self:center;}"],(function(e){return e.hidden?"none":"flex"})),le=m.a.button.withConfig({displayName:"GameMenu__GameButton",componentId:"sc-1mfgk5w-2"})(["background:white;color:#073642;border:1px solid #073642;border-radius:0.3rem;font-size:1rem;font-weight:bold;padding:0.5rem 0.4rem;width:2.5rem;margin:0.3rem;box-shadow:1px 1px 1px #073642;&[disabled]{display:none;}&:hover{background:#073642;color:white;cursor:pointer;}"]),se=Object(m.a)(ce).withConfig({displayName:"GameMenu__GameResult",componentId:"sc-1mfgk5w-3"})(["margin-top:0.3rem;font-weight:bold;font-size:1.5rem;color:#073642;width:100%;align-items:center;svg{margin-left:1rem;margin-right:1rem;}"]),ue=m.a.input.withConfig({displayName:"GameMenu__IconRadioInput",componentId:"sc-1mfgk5w-4"})(["display:none;&:checked + label{opacity:1;}"]),de=m.a.label.withConfig({displayName:"GameMenu__IconRadioLabel",componentId:"sc-1mfgk5w-5"})(["color:#073642;margin:0.2rem;opacity:0.2;&:hover{opacity:0.5;cursor:pointer;}"]),me=function(e,t){return e?e===t?re.h:re.k:re.a},fe=function(e){var t=e.currentValue,n=e.name,a=e.options,i=e.onChange;return r.a.createElement(r.a.Fragment,null,a.map((function(e){var a=e.value,o=e.description,c=e.icon;return r.a.createElement(r.a.Fragment,{key:"".concat(n,"-").concat(a)},r.a.createElement(ue,{type:"radio",id:"".concat(n,"-").concat(a),name:n,value:a,defaultChecked:t===a,onChange:function(e){return i(e.target.value)}}),r.a.createElement(de,{htmlFor:"".concat(n,"-").concat(a)},r.a.createElement(ie.a,{icon:c,title:o,size:"2x"})))})))},pe=function(e){var t=e.isAiThinking,n=e.firstMovePlayed,a=e.humanPlayerColor,i=e.gameEnded,o=e.winningPlayerColor,c=e.startNewGame,l=e.switchSides,s=e.rotateBoard,u=e.difficultyLevel,d=e.setDifficultyLevel,m=e.canUndoMove,f=e.undoMove;return r.a.createElement(oe,null,i&&r.a.createElement(se,null,r.a.createElement(ie.a,{icon:me(o,a),size:"2x"}),o?(1===o?"White":"Black")+" wins!":"Draw!"),r.a.createElement(ce,{hidden:t},r.a.createElement(le,{disabled:!n,onClick:c},r.a.createElement(ie.a,{icon:re.i,title:"Start new game"})),r.a.createElement(le,{disabled:i||n,onClick:l},r.a.createElement(ie.a,{icon:re.g,title:"Switch sides"})),r.a.createElement(le,{disabled:!m||i,onClick:f},r.a.createElement(ie.a,{icon:re.l,title:"Undo move"})),r.a.createElement(le,{disabled:i||!n,onClick:s},r.a.createElement(ie.a,{icon:re.j,title:"Rotate board"}))),r.a.createElement(ce,{hidden:t||i},r.a.createElement(fe,{currentValue:u,name:"difficulty-level",onChange:d,options:[{value:1,description:"Difficulty level 1 (easy)",icon:re.d},{value:2,description:"Difficulty level 2",icon:re.f},{value:3,description:"Difficulty level 3",icon:re.e},{value:4,description:"Difficulty level 4",icon:re.c},{value:5,description:"Difficulty level 5 (hard)",icon:re.b}]})),t&&r.a.createElement(h,null))},ve=m.a.div.withConfig({displayName:"PromotionPieceSelection__Overlay",componentId:"sc-1l2nlf7-0"})(["outline:1px solid #586e75;box-shadow:3px 3px 3px #586e75;margin:0;padding:0;position:absolute;z-index:1;@media (min-aspect-ratio:99/100){top:","vh;left:","vh;width:12.5vh;height:50vh;}@media (max-aspect-ratio:100/99){top:","vw;left:","vw;width:12.5vw;height:50vw;}"],(function(e){return 12.5*e.row}),(function(e){return 12.5*e.column}),(function(e){return 12.5*e.row}),(function(e){return 12.5*e.column})),he=m.a.div.withConfig({displayName:"PromotionPieceSelection__FieldDiv",componentId:"sc-1l2nlf7-1"})(["position:absolute;background-color:",";@media (min-aspect-ratio:99/100){top:","vh;width:12.5vh;height:12.5vh;}@media (max-aspect-ratio:100/99){top:","vw;width:12.5vw;height:12.5vw;}"],(function(e){return e.isEven?"#fdf6e3":"#eee8d5"}),(function(e){return 12.5*e.row}),(function(e){return 12.5*e.row})),ge=function(e){var t=e.column,n=e.playerColor,a=e.onSelection,i=e.isRotated,o=i?7-t:t,c=1===n?i?4:0:i?0:4,l=i&&-1!==n||!i&&-1===n?[2,3,4,5]:[5,4,3,2];return r.a.createElement(ve,{row:c,column:o},l.map((function(e,t){return r.a.createElement(he,{key:t,row:t,isEven:o+t&1,onClick:function(){return a(e)}},r.a.createElement(ee,{color:n,pieceId:e}))})))},be=p()(),we=m.a.div.withConfig({displayName:"Game__GameArea",componentId:"sc-19jauhs-0"})(["display:flex;flex-wrap:wrap;"]),xe="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",ye=m.a.div.withConfig({displayName:"Game__Centered",componentId:"sc-19jauhs-1"})(["position:absolute;left:calc(50% - 60px);top:calc(50% - 60px);"]),ke=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(1),c=Object(d.a)(o,2),m=c[0],f=c[1],p=Object(a.useState)(1),v=Object(d.a)(p,2),g=v[0],b=v[1],x=Object(a.useState)(!1),y=Object(d.a)(x,2),k=y[0],E=y[1],j=Object(a.useState)(),O=Object(d.a)(j,2),P=O[0],C=O[1],_=Object(a.useState)(!1),M=Object(d.a)(_,2),I=M[0],S=M[1],D=Object(a.useState)([]),N=Object(d.a)(D,2),G=N[0],R=N[1],B=Object(a.useState)(new Set),A=Object(d.a)(B,2),T=A[0],z=A[1],F=Object(a.useState)(),L=Object(d.a)(F,2),q=L[0],K=L[1],Q=Object(a.useState)(3),U=Object(d.a)(Q,2),J=U[0],V=U[1],W=Object(a.useState)([]),Z=Object(d.a)(W,2),H=Z[0],X=Z[1],Y=Object(a.useState)(void 0),$=Object(d.a)(Y,2),ee=$[0],te=$[1],ne=H.length>0?H[H.length-1]:{start:-1,end:-1},re=function(){return R([])},ie=Object(a.useCallback)((function(e){X([].concat(Object(u.a)(H),[e]))}),[X,H]),oe=Object(a.useCallback)(function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(t.board),R(t.moves),t.gameEnded?(S(!0),t.checkMate&&K(-t.activePlayer)):f(t.activePlayer);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);Object(a.useEffect)((function(){Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.init();case 2:return e.next=4,be.newGame();case 4:return e.next=6,be.setPosition(xe,[]);case 6:return t=e.sent,e.next=9,oe(t);case 9:case"end":return e.stop()}}),e)})))()}),[oe]);var ce=Object(a.useCallback)((function(e,t){return G.some((function(n){return n.start===e&&n.end===t}))}),[G]),le=Object(a.useCallback)(Object(s.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(re(),E(!0),!(J<5)){e.next=5;break}return e.next=5,new Promise((function(e){return setTimeout(e,100)}));case 5:return e.next=7,be.calculateMove(J);case 7:return t=e.sent,e.next=10,be.performMove(t);case 10:return n=e.sent,E(!1),e.next=14,oe(n);case 14:ie(t);case 15:case"end":return e.stop()}}),e)}))),[J,ie,oe]),se=function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(!0),b(-g),E(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){k&&Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le();case 2:case"end":return e.stop()}}),e)})))()}),[k,le]);var ue=function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!1),K(void 0),f(1),b(1),X([]),z(new Set),e.next=8,be.newGame();case 8:return e.next=10,be.setPosition(xe,[]);case 10:return t=e.sent,e.next=13,oe(t);case 13:i(!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=Object(a.useCallback)(Object(s.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=H.slice(0,H.length-2),e.next=3,be.setPosition(xe,t);case 3:return n=e.sent,X(t),e.next=7,oe(n);case 7:case"end":return e.stop()}}),e)}))),[H,X,oe]),me=Object(a.useCallback)(function(){var e=Object(s.a)(l.a.mark((function e(t,n,a){var r,i,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Math.abs(t),!I&&!k){e.next=3;break}return e.abrupt("return");case 3:if(ce(n,a)){e.next=5;break}return e.abrupt("return");case 5:if(z(new Set),1!==r||!(1===m&&a<8||-1===m&&a>=56)){e.next=11;break}re(),te({start:n,end:a,column:7&a,color:m}),e.next=22;break;case 11:return(i=P.slice())[n]=0,C(i),o=new w(r,n,a),e.next=17,be.performMove(o);case 17:return c=e.sent,e.next=20,oe(c);case 20:ie(o),c.gameEnded||E(!0);case 22:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),[m,ie,P,ce,I,k,oe]),fe=Object(a.useCallback)(function(){var e=Object(s.a)(l.a.mark((function e(t){var n,a,r,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ee.start,a=ee.end,te(void 0),(r=P.slice())[n]=0,C(r),i=new w(t,n,a),e.next=8,be.performMove(i);case 8:return o=e.sent,e.next=11,oe(o);case 11:ie(i),o.gameEnded||E(!0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[ie,P,ee,te,oe]);return P?r.a.createElement(we,null,ee&&r.a.createElement(ge,{column:ee.column,playerColor:ee.color,isRotated:n,onSelection:fe}),r.a.createElement(ae,{board:P,isRotated:n,lastMove:ne,currentPieceMoves:T,handlePlayerMove:me,updatePossibleMoves:function(e){var t=G.filter((function(t){return t.start===e})).map((function(e){return e.end}));z(new Set(t))},clearPossibleMoves:function(){z(new Set)}}),r.a.createElement(pe,{isAiThinking:k,firstMovePlayed:-1!==ne.start,humanPlayerColor:g,gameEnded:I,winningPlayerColor:q,startNewGame:ue,switchSides:se,rotateBoard:function(){return i(!n)},difficultyLevel:J,setDifficultyLevel:V,canUndoMove:!I&&H.length>1,undoMove:de})):r.a.createElement(ye,null,r.a.createElement(h,null))},Ee=n(70),je=n(46),Oe=n(47),Pe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n=t.map((function(t){return t(e)}));return{setup:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n.forEach((function(e){return e.setup.apply(e,t)}))},teardown:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n.forEach((function(e){return e.teardown.apply(e,t)}))},connectDropTarget:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n.forEach((function(e){return e.connectDropTarget.apply(e,t)}))},connectDragPreview:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n.forEach((function(e){return e.connectDragPreview.apply(e,t)}))},connectDragSource:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n.forEach((function(e){return e.connectDragSource.apply(e,t)}))}}}};var Ce=function(){return r.a.createElement("main",null,r.a.createElement(Ee.a,{backend:Pe(je.a,Oe.a)},r.a.createElement(ke,null)))};o.a.render(r.a.createElement(Ce,null),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.7e5d870e.chunk.js.map