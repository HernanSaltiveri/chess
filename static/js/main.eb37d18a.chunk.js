(this.webpackJsonpchess=this.webpackJsonpchess||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){var r=n(44),a=["calculateMove"];e.exports=function(){var e=new Worker(n.p+"e5a079cb85634e6c4f3b.worker.js",{name:"[hash].worker.js"});return r(e,a),e}},,,,,function(e,t,n){e.exports=n.p+"static/media/white_pawn.41da1b5b.svg"},function(e,t,n){e.exports=n.p+"static/media/black_pawn.3cab4671.svg"},function(e,t,n){e.exports=n.p+"static/media/white_knight.3ece5029.svg"},function(e,t,n){e.exports=n.p+"static/media/black_knight.88ad52be.svg"},function(e,t,n){e.exports=n.p+"static/media/white_bishop.36a96cf8.svg"},function(e,t,n){e.exports=n.p+"static/media/black_bishop.341337f4.svg"},function(e,t,n){e.exports=n.p+"static/media/white_rook.007b43f5.svg"},function(e,t,n){e.exports=n.p+"static/media/black_rook.e7f61dec.svg"},function(e,t,n){e.exports=n.p+"static/media/white_queen.51d538db.svg"},function(e,t,n){e.exports=n.p+"static/media/black_queen.87612c77.svg"},function(e,t,n){e.exports=n.p+"static/media/white_king.9e716b1e.svg"},function(e,t,n){e.exports=n.p+"static/media/black_king.12ae1430.svg"},,,,,,function(e,t,n){e.exports=n(52)},,,,,function(e,t,n){},,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(15),o=n.n(i),c=(n(43),n(4)),u=n(2),s=n(16),l=n.n(s),d=n(35),f=Object(d.a)(Array(16).keys()).map((function(e){return 1<<e+13})),m=function(e){return e[e.length-1]},p=function(e){return 0!==(128&m(e))},h=function(e){return 0!==(256&m(e))},g=function(e){return 0!==(512&m(e))},v=function(e){return 0!==(1024&m(e))},b=function(e){return 0!==(2048&m(e))},w=function(e){return 0!==(4096&m(e))},k=function(e){e[e.length-1]=512|m(e)},M=function(e){e[e.length-1]=1024|m(e)},E=function(e){e[e.length-1]=2048|m(e)},x=function(e){e[e.length-1]=4096|m(e)},O={PAWN:{id:1,name:"Pawn",value:1},KNIGHT:{id:2,name:"Knight",value:3},BISHOP:{id:3,name:"Bishop",value:3},ROOK:{id:4,name:"Rook",value:5},QUEEN:{id:5,name:"Queen",value:9},KING:{id:6,name:"King",value:10}},y=Object.values(O).sort((function(e,t){return e.id-t.id})).map((function(e){return e})),I=function(e){return y[e-1]},_=O.PAWN.id,P=O.KNIGHT.id,j=O.BISHOP.id,N=O.ROOK.id,S=O.QUEEN.id,C=O.KING.id,B=function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(99===e[a])return!1;var o=Math.sign(e[r]);if(t!==o)return!1;var c=Math.sign(e[a]);if(o===c)return!1;if(!i&&X(e,{piece:n,start:r,end:a},t))return!1;var u=-o;if(a-r===10*u&&0===e[a])return!0;var s=1===o?81:31,l=1===o?88:38,d=r>=s&&r<=l,f=0===e[r+10*u];return!(a-r!==20*u||!d||!f||0!==e[a])||((a-r===11*u||a-r===9*u)&&0!==e[a]||!(a-r!==11*u&&a-r!==9*u||0!==e[a]||!G(e,o,a)))},G=function(e,t,n){var r=m(e);return n>40&&n<49&&1===t?0!==(r&f[n-41]):n>70&&n<79&&-1===t&&0!==(r&f[n-71+8])},K=function(){return[O.QUEEN,O.ROOK,O.BISHOP,O.KNIGHT]},D=[21,19,12,8,-12,-21,-19,-8],T=function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(99===e[a])return!1;var o=Math.sign(e[r]);if(t!==o)return!1;var c=Math.sign(e[a]);return o!==c&&(!(!i&&X(e,{piece:n,start:r,end:a},t))&&D.some((function(e){return a===r+e})))},A=[9,11,-9,-11],R=function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(99===e[a])return!1;var o=Math.sign(e[r]);if(t!==o)return!1;var c=Math.sign(e[a]);return o!==c&&(!(!i&&X(e,{piece:n,start:r,end:a},t))&&A.some((function(t){for(var n=1;n<=7;n++){if(a===r+t*n)return!0;if(0!==e[r+t*n])return!1}return!1})))},H=function(e,t,n,r){return A.flatMap((function(a){for(var i=[],o=1;o<=7;o++){if(!R(e,t,n,r,r+a*o)){if(0===e[r+a*o])continue;return i}i.push({piece:n,start:r,end:r+a*o})}return i}))},Q=[1,10,-1,-10],U=function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(99===e[a])return!1;var o=Math.sign(e[r]);if(t!==o)return!1;var c=Math.sign(e[a]);return o!==c&&(!(!i&&X(e,{piece:n,start:r,end:a},t))&&Q.some((function(t){for(var n=1;n<=7;n++){if(a===r+t*n)return!0;if(0!==e[r+t*n])return!1}return!1})))},W=function(e,t,n,r){return Q.flatMap((function(a){for(var i=[],o=1;o<=7;o++){if(!U(e,t,n,r,r+a*o)){if(0===e[r+a*o])continue;return i}i.push({piece:n,start:r,end:r+a*o})}return i}))},q=Q.concat(A),z=function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(99===e[a])return!1;var o=Math.sign(e[r]);if(t!==o)return!1;var c=Math.sign(e[a]);if(o===c)return!1;if(!p(e)){if(!v(e)&&1===t&&95===r&&97===a&&0===e[96]&&0===e[97]&&!Z(e,-t,95)&&!Z(e,-t,96)&&!Z(e,-t,97))return!0;if(!g(e)&&1===t&&95===r&&93===a&&0===e[94]&&0===e[93]&&0===e[92]&&!Z(e,-t,95)&&!Z(e,-t,94)&&!Z(e,-t,93)&&!Z(e,-t,92))return!0}if(!h(e)){if(!w(e)&&-1===t&&25===r&&27===a&&0===e[26]&&0===e[27]&&!Z(e,-t,25)&&!Z(e,-t,26)&&!Z(e,-t,27))return!0;if(!b(e)&&-1===t&&25===r&&23===a&&0===e[24]&&0===e[23]&&0===e[22]&&!Z(e,-t,25)&&!Z(e,-t,24)&&!Z(e,-t,23)&&!Z(e,-t,22))return!0}var u=q.some((function(e){return r+e===a}));return u&&(i||!X(e,{piece:n,start:r,end:a},t))},F=function(e,t){var n=t.piece,r=t.start,a=t.end,i=Math.sign(e[r]),o=e[a];return e[r]=0,1===n.id&&0===e[a]&&(9===Math.abs(r-a)?(o=e[r+i],e[r+i]=0,t.enPassant=!0):11===Math.abs(r-a)&&(o=e[r-i],e[r-i]=0,t.enPassant=!0)),e[a]=n.id*i,6===n.id&&(1===i?function(e){e[e.length-1]=128|m(e)}(e):function(e){e[e.length-1]=256|m(e)}(e),2===Math.abs(r-a)&&(97===a?(e[96]=e[98],e[98]=0,M(e)):93===a?(e[94]=e[91],e[91]=0,k(e)):27===a?(e[26]=e[28],e[28]=0,x(e)):23===a&&(e[24]=e[21],e[21]=0,E(e)))),4===n.id&&(91===r?k(e):98===r?M(e):21===r?E(e):28===r&&x(e)),J(e),1===n.id&&20===Math.abs(r-a)&&L(e,r,i),o},J=function(e){e[e.length-1]=m(e)&f[0]-1},L=function(e,t,n){var r=-1===n?t-31:t-81+8;e[e.length-1]=m(e)|f[r]},V=function(e,t){var n=e.findIndex((function(e){return e===O.KING.id*t}));return!n||Z(e,-t,n)},X=function(e,t,n){var r=m(e),a=F(e,t),i=V(e,n);return function(e,t,n,r){var a=t.start,i=t.end,o=t.piece,c=t.enPassant;if(e[e.length-1]=r,e[a]=e[i],e[i]=c?0:n,c){var u=Math.sign(e[a]);9===Math.abs(a-i)?e[a+u]=n:11===Math.abs(a-i)&&(e[a-u]=n)}6===o.id&&2===Math.abs(a-i)&&(97===i?(e[98]=e[96],e[96]=0):93===i?(e[91]=e[94],e[94]=0):27===i?(e[28]=e[26],e[26]=0):23===i&&(e[21]=e[24],e[24]=0))}(e,t,a,r),i},Y=[B,T,R,U,function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return R(e,t,n,r,a,i)||U(e,t,n,r,a,i)},z],Z=function(e,t,n){return e.some((function(r,a){if(a===e.length-1)return!1;if(0===r||99===r)return!1;if(Math.sign(r)!==t)return!1;var i=Math.abs(r),o=I(i);return(0,Y[i-1])(e,t,o,a,n,!0)}))},$=[function(e,t,n,r){var a=-t;return 1===t&&r<39?[9,10,11,20].filter((function(i){return B(e,t,n,r,r+i*a)})).flatMap((function(e){return K().map((function(t){return{piece:t,start:r,end:r+e*a}}))})):-1===t&&r>80?[9,10,11,20].filter((function(i){return B(e,t,n,r,r+i*a)})).flatMap((function(e){return K().map((function(t){return{piece:t,start:r,end:r+e*a}}))})):[9,10,11,20].filter((function(i){return B(e,t,n,r,r+i*a)})).map((function(e){return{piece:n,start:r,end:r+e*a}}))},function(e,t,n,r){return D.filter((function(a){return T(e,t,n,r,r+a)})).map((function(e){return{piece:n,start:r,end:r+e}}))},H,W,function(e,t,n,r){return H(e,t,n,r).concat(W(e,t,n,r))},function(e,t,n,r){var a=q.filter((function(a){return z(e,t,n,r,r+a)})).map((function(e){return{piece:n,start:r,end:r+e}}));return(1===t&&95===r||-1===t&&25===r)&&(z(e,t,n,r,r+2)&&a.push({piece:n,start:r,end:r+2}),z(e,t,n,r,r-2)&&a.push({piece:n,start:r,end:r-2})),a}],ee=function(e,t){return e.flatMap((function(n,r){if(r===e.length-1)return[];if(0===n||99===n)return[];if(Math.sign(n)!==t)return[];var a=Math.abs(n),i=I(a);return(0,$[a-1])(e,t,i,r)}))},te=function(e,t){return V(e,t)&&0===ee(e,t).length},ne=n(6),re=u.a.div.withConfig({displayName:"Field__FieldDiv",componentId:"l5smif-0"})(["position:relative;&:nth-child(even){background-color:#f8f5df;}&.move-mark:before{position:absolute;top:4%;left:4%;bottom:4%;right:4%;content:'';display:block;border:0.5vh solid ",";border-radius:50%;}"],(function(e){return e.markColor})),ae=function(e){var t=e.boardIndex,n=e.children,r=e.movePiece,i=e.isStart,o=e.isEnd,u=e.isPossibleTarget,s=Object(ne.d)({accept:"PIECE",drop:function(e,n){r(e.piece,e.boardIndex,t)}}),l=Object(c.a)(s,2)[1],d=i||o||u?"move-mark":"",f=u?"#80fa72":i?"lightpink":o?"salmon":"white";return a.a.createElement(re,{ref:l,style:{position:"relative"},isStart:i,markColor:f,className:d},n)},ie=n(21),oe=n.n(ie),ce=n(22),ue=n.n(ce),se=n(23),le=n.n(se),de=n(24),fe=n.n(de),me=n(25),pe=n.n(me),he=n(26),ge=n.n(he),ve=n(27),be=n.n(ve),we=n(28),ke=n.n(we),Me=n(29),Ee=n.n(Me),xe=n(30),Oe=n.n(xe),ye=n(31),Ie=n.n(ye),_e=n(32),Pe=n.n(_e),je=[oe.a,le.a,pe.a,be.a,Ee.a,Ie.a],Ne=[ue.a,fe.a,ge.a,ke.a,Oe.a,Pe.a],Se=u.a.div.withConfig({displayName:"Piece__PieceContainer",componentId:"xjorig-0"})(["-webkit-transform:translate3d(0,0,0);"]),Ce=u.a.img.withConfig({displayName:"Piece__PieceImage",componentId:"xjorig-1"})(["display:block;margin:13%;height:74%;width:74%;&.dragging{visibility:hidden;}"]),Be=function(e){var t=e.boardIndex,n=e.color,r=e.piece,i=e.onPickup,o=e.onDrop,u="black"===n?Ne[r.id-1]:je[r.id-1],s=Object(ne.c)({item:{type:"PIECE",piece:r,boardIndex:t},begin:function(e){return i(t)},end:function(e){return o(t)},collect:function(e){return{isDragging:!!e.isDragging()}}}),l=Object(c.a)(s,2),d=l[0].isDragging,f=l[1];return a.a.createElement(Se,{ref:f},a.a.createElement(Ce,{src:u,alt:r.name,className:d?"dragging":""}))},Ge=u.a.div.withConfig({displayName:"Board__BoardGrid",componentId:"sc-1rho0e0-0"})(["display:grid;grid-template-columns:0 repeat(8,1fr);grid-template-rows:0 repeat(8,1fr);border-right:1px solid salmon;@media (min-aspect-ratio:99/100){width:100vh;height:100vh;}@media (max-aspect-ratio:100/99){width:100vw;height:100vw;}"]),Ke=function(e){var t=e.board,n=e.lastMove,r=e.currentPieceMoves,i=e.handlePlayerMove,o=e.updatePossibleMoves,c=e.clearPossibleMoves;return a.a.createElement(Ge,null,t.map((function(e,t){return t%10===9||t>=100||t<10?null:99===e?a.a.createElement("div",{key:t,className:"board_frame"}):a.a.createElement(ae,{key:t,boardIndex:t,movePiece:i,isStart:t===n.start,isEnd:t===n.end,isPossibleTarget:r.has(t)},0!==e&&a.a.createElement(Be,{boardIndex:t,color:e<0?"black":"white",piece:I(Math.abs(e)),onPickup:o,onDrop:c}))})))},De=n(33);function Te(){var e=Object(De.a)(["\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"]);return Te=function(){return e},e}var Ae=u.a.div.withConfig({displayName:"SideBar__MenuBar",componentId:"sc-1tr75vg-0"})(["display:flex;flex-direction:column;margin:1rem;text-align:center;"]),Re=u.a.div.withConfig({displayName:"SideBar__MenuItem",componentId:"sc-1tr75vg-1"})(["display:",";align-self:center;padding-bottom:0.5rem;"],(function(e){return e.hidden?"none":"flex"})),He=u.a.button.withConfig({displayName:"SideBar__GameButton",componentId:"sc-1tr75vg-2"})(["background:none;border:1px solid salmon;border-radius:0.5rem;color:salmon;font-size:1rem;font-weight:bold;padding:0.5rem;width:11rem;&:hover{background:salmon;color:white;cursor:pointer;}"]),Qe=Object(u.a)(Re).withConfig({displayName:"SideBar__ThinkingIndicator",componentId:"sc-1tr75vg-3"})(["font-weight:bold;margin-left:1rem;font-size:1rem;text-align:center;color:salmon;"]),Ue=Object(u.b)(Te()),We=u.a.div.withConfig({displayName:"SideBar__AnimatedDualRing",componentId:"sc-1tr75vg-4"})(["display:inline-block;width:128px;height:128px;&:after{content:' ';display:block;width:80px;height:80px;margin:8px;border-radius:50%;border:6px solid salmon;border-color:salmon transparent salmon transparent;animation:"," 1.2s linear infinite;}"],Ue),qe=Object(u.a)(Re).withConfig({displayName:"SideBar__GameResult",componentId:"sc-1tr75vg-5"})(["padding-top:2rem;font-weight:bold;font-size:1.5rem;color:salmon;"]),ze=function(e){var t=e.isAiThinking,n=e.gameEnded,r=e.winningPlayerColor,i=e.startNewGame,o=e.forceAiMove,c=e.searchDepth,u=e.setSearchDepth;return a.a.createElement(Ae,null,a.a.createElement(Re,{hidden:t},a.a.createElement(He,{disabled:t,onClick:i},"New Game")),a.a.createElement(Re,{hidden:t||n},a.a.createElement(He,{disabled:t||n,onClick:o,title:"Let computer play the current color"},"Computer Move")),a.a.createElement(Re,{hidden:t},a.a.createElement("label",null,a.a.createElement("input",{type:"range",min:"3",max:"5",title:"Difficulty",value:c,onChange:function(e){return u(e.target.value)}}))),t&&a.a.createElement(Qe,null,a.a.createElement(We,null,"Thinking ...")),n&&a.a.createElement(qe,null,r?(1===r?"White":"Black")+" wins!":"Stalemate!"))},Fe=l()(),Je=[99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,-N,-P,-j,-S,-C,-j,-P,-N,99,99,-_,-_,-_,-_,-_,-_,-_,-_,99,99,0,0,0,0,0,0,0,0,99,99,0,0,0,0,0,0,0,0,99,99,0,0,0,0,0,0,0,0,99,99,0,0,0,0,0,0,0,0,99,99,_,_,_,_,_,_,_,_,99,99,N,P,j,S,C,j,P,N,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,0],Le=u.a.div.withConfig({displayName:"Game__GameArea",componentId:"qivay-0"})(["display:flex;flex-wrap:wrap;"]),Ve=function(){var e=Object(r.useState)(1),t=Object(c.a)(e,2),n=t[0],i=t[1],o=Object(r.useState)(!1),u=Object(c.a)(o,2),s=u[0],l=u[1],d=Object(r.useState)(Je),f=Object(c.a)(d,2),m=f[0],p=f[1],h=Object(r.useState)(!1),g=Object(c.a)(h,2),v=g[0],b=g[1],w=Object(r.useState)({start:-1,end:-1}),k=Object(c.a)(w,2),M=k[0],E=k[1],x=Object(r.useState)(ee(m,n)),y=Object(c.a)(x,2),I=y[0],_=y[1],P=Object(r.useState)(new Set),j=Object(c.a)(P,2),N=j[0],S=j[1],C=Object(r.useState)(),B=Object(c.a)(C,2),G=B[0],K=B[1],D=Object(r.useState)(5),T=Object(c.a)(D,2),A=T[0],R=T[1],H=function(e,t,n){l(!1),E(t);var r=e.slice(0);if(F(r,t),p(r),te(r,-n))return b(!0),void K(n);var a=ee(r,-n);(_(a),0!==a.length)?i(-n):b(!0)};return a.a.createElement(Le,null,a.a.createElement(Ke,{board:m,lastMove:M,currentPieceMoves:N,handlePlayerMove:function(e,t,r){if(!v&&!s&&function(e,t){return I.some((function(n){return n.start===e&&n.end===t}))}(t,r)){if(E({start:t,end:r}),"Pawn"===e.name&&1===n&&r<29)switch(prompt("Choose promotion (Q, R, B, K)","Q").toUpperCase()){case"R":e=O.ROOK;break;case"B":e=O.BISHOP;break;case"K":e=O.KNIGHT;break;case"Q":default:e=O.QUEEN}var a=m.slice(0);if(F(a,{piece:e,start:t,end:r}),p(a),te(a,-n))return b(!0),void K(n);0!==ee(a,-n).length?(l(!0),_([]),Fe.calculateMove(a,-n,A).then((function(e){return H(a,e,-n)})),i(-n)):b(!0)}},updatePossibleMoves:function(e){var t=I.filter((function(t){return t.start===e})).map((function(e){return e.end}));S(new Set(t))},clearPossibleMoves:function(){S(new Set)}}),a.a.createElement(ze,{isAiThinking:s,gameEnded:v,winningPlayerColor:G,startNewGame:function(){p(Je),i(1),b(!1),E({start:-1,end:-1}),K(void 0),_(ee(Je,n)),S(new Set)},forceAiMove:function(){l(!0),Fe.calculateMove(m,n,A).then((function(e){H(m,e,n)}))},searchDepth:A,setSearchDepth:R}))},Xe=n(34);var Ye=function(){return a.a.createElement("main",null,a.a.createElement(ne.b,{backend:Xe.a},a.a.createElement(Ve,null)))};o.a.render(a.a.createElement(Ye,null),document.getElementById("root"))}],[[38,1,2]]]);
//# sourceMappingURL=main.eb37d18a.chunk.js.map